= TFHE Java image:{badges}/License-MIT-yellow.svg[link={license},title=MIT License]
:author:        Rui LOPES
:owner:         rdlopes
:email:         mailto:rui.d.lopes@me.com
:project:       tfhe-java
:key:           {owner}_{project}
:repo:          https://github.com/{owner}/{project}
:native:        {repo}/actions/workflows/native.yaml
:ci:            {repo}/actions/workflows/ci.yaml
:cd:            {repo}/actions/workflows/cd.yaml
:linkedin:      https://www.linkedin.com/in/rdlopes-fr
:badges:        https://img.shields.io/badge
:license:       https://opensource.org/licenses/MIT

image:{native}/badge.svg[link={native},window=_blank]
image:{ci}/badge.svg[link={ci},window=_blank]
image:{cd}/badge.svg[link={cd},window=_blank]

https://docs.zama.ai/tfhe-rs[Zama TFHE^] wrapper enabling homomorphic encryption in Java using the Foreign Function & Memory API (Project Panama).

== Overview

TFHE Java is a Java wrapper for the https://github.com/zama-ai/tfhe-rs[Zama TFHE-rs library], providing access to Torus Fully Homomorphic Encryption (TFHE) operations directly from Java applications.
This library enables developers to perform computations on encrypted data without decrypting it first, ensuring privacy and security in cloud computing scenarios.

== Installation

Add the following dependency to your `pom.xml`:

[source,xml]
----
<dependency>
    <groupId>io.github.rdlopes</groupId>
    <artifactId>tfhe-java</artifactId>
    <version>[VERSION]</version>
</dependency>
----

=== Requirements

* **Java 24** or later (requires Foreign Function & Memory API support)
* **JVM Arguments**: `--enable-native-access=ALL-UNNAMED` (or provide a named module)
* **Native Libraries**: Automatically included in the JAR (supports macOS ARM64, Linux x86_64, Windows x86_64)

WARNING: Native libraries are included but need to be extracted first and added to your `LD_LIBRARY_PATH` or `DYLD_LIBRARY_PATH` or `java.library.path`
system property.

=== Generated Bindings

The build process automatically generates Java bindings from the TFHE-rs C API:

- **Native Package**: `ai.zama.tfhe`
- **Main Class**: `TfheNative` - Contains all native function bindings
- **Key Management**: `ConfigBuilder`, `Config`, `ClientKey`, `CompressedServerKey`
- **Memory Management**: Uses Java's Foreign Function & Memory API with a simplified interface

== Building from Source

For most users, the library is available through Maven Central and doesn't require building from source.
However, if you need to build locally:

=== Standard Build

[source,bash]
----
# Clone the repository
git clone https://github.com/rdlopes/tfhe-java.git
cd tfhe-java

# Build the project
./mvnw package
----

**Prerequisites:**
* **Java 24** (Temurin distribution recommended)

[source,bash]
----
# Using SDKMAN
sdk install java 24-tem
sdk use java 24-tem
----

The build process automatically downloads pre-built native libraries and Java bindings, making it simple to get started without complex toolchain setup.

=== Building for Unsupported Platforms

The library includes pre-built native libraries for **macOS ARM64**, **Linux x86_64**, and **Windows x86_64**.
If your development platform is not among these supported platforms, you can build the library from source using the `local` maven profile to create a native wrapper that suits your specific platform.

This approach is also useful for:

* Local development with custom modifications
* Building on architectures not covered by the pre-built binaries
* Creating optimized builds for specific hardware configurations

[source,bash]
----
# Build with local profile (builds from TFHE-rs source)
./mvnw package -Plocal
----

**Additional Prerequisites for Local Build:**
* **Rust toolchain** with nightly support * **jextract** tool (version 22) for generating Java bindings from C headers

The `local` profile performs the following steps:
1. **TFHE-rs download**: Downloads the tfhe-rs source from GitHub 2. **Rust compilation**: Compiles the TFHE Rust library with C API 3. **Binding generation**: Uses jextract to generate Java bindings from C headers 4. **Java compilation**: Compiles Java code including generated bindings 5. **Native library packaging**: Copies native libraries to target/classes/native

=== Performance Tips

* **Key Reuse**: Generate keys once and reuse them across operations
* **Memory Efficiency**: Use appropriate data types (U128 for integers, Boolean for binary operations)
* **Batch Operations**: Group multiple operations when possible to reduce overhead
* **Resource Management**: Always use try-with-resources for Arena management

== License

This project is licensed under the link:{license}[MIT License].

== Acknowledgments

* https://www.zama.ai/[Zama] for the excellent TFHE-rs library
* OpenJDK Project Panama for Foreign Function & Memory API
* The homomorphic encryption research community

== Author

image:{badges}/By_Mail-white?style=social&logo=icloud&label=Rui_LOPES[link={email},window=_blank]

image:{badges}/On_LinkedIn-white?style=social&logo=logmein&label=Rui_LOPES[link={linkedin},window=_blank]
